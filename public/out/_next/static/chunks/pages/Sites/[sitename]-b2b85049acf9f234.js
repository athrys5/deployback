(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{3248:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Sites/[sitename]",function(){return n(1706)}])},1706:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return u},default:function(){return d}});var a=n(5893),s=n(7294),i=n(5936),l=n.n(i),r=n(9198),o=n.n(r);n(8698);var c=n(1163),u=!0;function d(e){var t=e.site,n=function(e){G(!1),S(!1),k(!1),$(""),N(),T(!1),"DogSitter"==e?V("DogSitter"):"Veterinarian"==e&&V("Veterinarian"),p(!0)},i=function(){"DogSitter"==I?z.some(function(e){return e.getDate()==b.getDate()&&e.getMonth()==b.getMonth()&&e.getFullYear()==b.getFullYear()&&e.getHours()==b.getHours()})?S(!0):(fetch("http://localhost:3000/apiSitesPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:b,name:t[0].name,type:"dog",sitenumber:es})}).then().then(function(){window.location.reload()}),G(!0),k(!1)):"Veterinarian"==I&&(J.some(function(e){return e.getDate()==b.getDate()&&e.getMonth()==b.getMonth()&&e.getFullYear()==b.getFullYear()&&e.getHours()==b.getHours()})?S(!0):(fetch("http://localhost:3000/apiSitesPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:b,name:t[0].name,type:"vet",sitenumber:es})}).then().then(function(){window.location.reload()}),G(!0),k(!1)))},r=function(){if(k(!1),T(!1),"default"!=K.current.value){$("animal");for(var e=0;e<et.length;e++)K.current.value===et[e].name&&em(et[e])}else $("default")},u=function(e){if(T(!0),ei(e),O([]),A([]),L([]),X([]),N(),"DogSitter"==I){if(0!=t[0].resDog[e].length){for(var n in t[0].resDog[e])Z.push(new Date(t[0].resDog[e][n].date));O(Z)}}else if("Veterinarian"==I&&0!=t[0].resVet[e].length){for(var a in t[0].resVet[e])Z.push(new Date(t[0].resVet[e][a].date));A(Z)}},d=(0,c.useRouter)(),m=(0,s.useState)({}),h=m[0],f=m[1],g=(0,s.useState)(!1),_=g[0],p=g[1],v=(0,s.useState)(!1),x=v[0],S=v[1],j=(0,s.useState)(),b=j[0],N=j[1],D=(0,s.useState)(!1),y=D[0],k=D[1],w=(0,s.useState)(!1),P=w[0],T=w[1],C=(0,s.useState)(""),I=C[0],V=C[1],H=(0,s.useState)([]),M=H[0],O=H[1],B=(0,s.useState)([]),Y=B[0],A=B[1],F=(0,s.useState)(!1),R=F[0],G=F[1],E=new Date,U=(0,s.useState)([]),z=U[0],L=U[1],q=(0,s.useState)([]),J=q[0],X=q[1],Z=[],K=(0,s.useRef)(),Q=(0,s.useState)([]),W=Q[0],$=Q[1],ee=(0,s.useState)([]),et=ee[0],en=ee[1],ea=(0,s.useState)(""),es=ea[0],ei=ea[1],el=function(e){var t=e.getDay();return 0!==t&&6!==t},er=function(e){var t=new Date,n=new Date(e);return t.getTime()<n.getTime()},eo=function(e){return M.filter(function(t){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()})},ec=function(e){return Y.filter(function(t){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()})};(0,s.useEffect)(function(){fetch("../exist.json",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){f(e)}),h.key&&fetch("http://localhost:3000/animalget",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){en(e.data)})},[h]);var eu=(0,s.useState)([]),ed=eu[0],em=eu[1];return(0,a.jsxs)("div",{className:"container-fluid",style:{marginBottom:"80px"},children:[(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().rowInfo),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().colInfo),children:[(0,a.jsx)("p",{className:l().name,children:t[0].name}),(0,a.jsxs)("p",{className:l().city,children:["City: ",t[0].city]}),(0,a.jsxs)("div",{className:l().servInfo,children:[(0,a.jsx)("p",{className:l().service,children:"Available services:"}),t[0].services.map(function(e,t){return(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:l().serBtn,onClick:function(){return n(e)},children:e})},t)})]})]})}),!0==_&&"DogSitter"==I&&h.key&&(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().divRes),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().divDate),children:[(0,a.jsx)("p",{className:l().labelPicker,children:I}),h.key&&et.length>0?(0,a.jsxs)("div",{className:l().divAnimal,children:[(0,a.jsx)("p",{className:l().labelAnimal,children:"Please select an animal!"}),(0,a.jsxs)("select",{className:"form-select ".concat(l().select),"aria-label":"Select an animal",ref:K,onChange:r,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select your animal"}),et.map(function(e,t){return(0,a.jsx)("option",{value:e.name,children:e.name},t)})]})]}):"",h.key&&0==et.length?(0,a.jsx)("p",{className:l().notanimalP,children:"You must insert at least an animal in your profile before continue!"}):(0,a.jsxs)("div",{className:"row justify-content-center",children:[(0,a.jsx)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:"animal"==W&&ed.breed&&ed.breed.toUpperCase().includes("DOG")&&t[0].resDog.map(function(e,n){return(0,a.jsxs)("button",{className:l().siteBtn,onClick:function(){return u(t[0].resDog.indexOf(e))},children:["Site number: ",t[0].resDog.indexOf(e)+1]},n)})}),(0,a.jsx)("div",{children:!0==P&&ed.breed&&ed.breed.toUpperCase().includes("DOG")?(0,a.jsxs)("div",{className:l().pickerDiv,children:[(0,a.jsxs)("p",{className:l().labelSiteNum,children:["You have selected the Site number ",es+1,", please choose a date!"]}),(0,a.jsx)(o(),{selected:b,onChange:function(e){G(!1),S(!1),null==e?k(!1):k(!0),null!=e&&(L(eo(e)),(8>e.getHours()||e.getHours()>19)&&e.setHours(E.getHours()+1)),N(e)},onSelect:function(e){L(eo(e)),e.setHours(E.getHours()+1)},dateFormat:"dd/MM/yyyy , h:mm a",showTimeSelect:!0,minDate:new Date,timeIntervals:60,isClearable:!0,excludeTimes:z,placeholderText:"Choose a date",filterDate:el,filterTime:er,minTime:new Date(0,0,0,8,0),maxTime:new Date(0,0,0,19,0),"aria-label":"select a date for the reservation"})]}):(0,a.jsx)("div",{children:"animal"==W&&ed.breed&&!ed.breed.toUpperCase().includes("DOG")&&(0,a.jsx)("p",{className:l().notDogP,children:"The animal must be a Dog!"})})})]})]})}),!0==_&&"Veterinarian"==I&&h.key&&(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().divRes),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().divDate),children:[(0,a.jsx)("p",{className:l().labelPicker,children:I}),h.key&&et.length>0?(0,a.jsxs)("div",{className:l().divAnimal,children:[(0,a.jsx)("p",{className:l().labelAnimal,children:"Please select an animal!"}),(0,a.jsxs)("select",{className:"form-select ".concat(l().select),"aria-label":"select an animal",ref:K,onChange:r,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select your animal"}),et.map(function(e,t){return(0,a.jsx)("option",{value:e.name,children:e.name},t)})]})]}):"",h.key&&0==et.length?(0,a.jsx)("p",{className:l().notanimalP,children:"You must insert at least an animal in your profile before continue!"}):(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsxs)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:["animal"==W&&parseInt(ed.height)<=parseInt(t[0].VetInfo.maxheight)&&parseInt(ed.length)<=parseInt(t[0].VetInfo.maxlength)&&t[0].resVet.map(function(e,n){return(0,a.jsxs)("button",{className:l().siteBtn,onClick:function(){return u(t[0].resVet.indexOf(e))},children:["Site number: ",t[0].resVet.indexOf(e)+1]},n)}),(0,a.jsxs)("div",{children:[!0==P&&(0,a.jsxs)("div",{className:l().pickerDiv,children:[(0,a.jsxs)("p",{className:l().labelSiteNum,children:["You have selected the Site number ",es+1,", please choose a date!"]}),(0,a.jsx)(o(),{selected:b,onChange:function(e){G(!1),S(!1),null==e?k(!1):k(!0),null!=e&&(X(ec(e)),(8>e.getHours()||e.getHours()>19)&&e.setHours(E.getHours()+1)),N(e)},onSelect:function(e){X(ec(e)),e.setHours(E.getHours()+1)},dateFormat:"dd/MM/yyyy , h:mm a",showTimeSelect:!0,minDate:new Date,isClearable:!0,timeIntervals:60,excludeTimes:J,placeholderText:"Choose a date",filterDate:el,filterTime:er,minTime:new Date(0,0,0,8,0),maxTime:new Date(0,0,0,19,0),"aria-label":"select a date for the reservation"})]}),"animal"==W&&(parseInt(ed.height)>parseInt(t[0].VetInfo.maxheight)||parseInt(ed.length)>parseInt(t[0].VetInfo.maxlength))?(0,a.jsx)("p",{className:l().cantbookP,children:"The size of the animal is not suitable"}):""]})]})})]})}),!0==y&&h.key&&(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-3 col-md-5 col-sm-8",children:(0,a.jsx)("button",{className:l().bookBtn,onClick:i,children:"Book!"})})}),!h.key&&(0,a.jsx)("p",{className:l().resP,children:"You are not logged , you can't take a reservation"}),!0==R&&(0,a.jsx)("p",{className:l().resP,children:"Reservation Made"}),!0==x&&(0,a.jsx)("p",{className:l().resP,children:"Sorry, the date selected is already reserved"}),(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-3 col-md-5 col-sm-8",children:(0,a.jsx)("button",{onClick:function(){return d.back()},className:l().backBtn,children:"Go back"})})})]})}},5936:function(e){e.exports={name:"Sites_name__YSUPx",city:"Sites_city__VDgr4",select:"Sites_select__pAlo5",service:"Sites_service__ALafS",servInfo:"Sites_servInfo__0mfbq",rowInfo:"Sites_rowInfo__zL__M",colInfo:"Sites_colInfo__jw2UL",serBtn:"Sites_serBtn__Q_m8h",labelPicker:"Sites_labelPicker__kdCn8",divDate:"Sites_divDate__93dKv",bookBtn:"Sites_bookBtn__0O_TO",resP:"Sites_resP__AdHzh",backBtn:"Sites_backBtn__I5vkI",notDogP:"Sites_notDogP__GUzAR",labelAnimal:"Sites_labelAnimal__V4LbO",cantbookP:"Sites_cantbookP__eML3A",notanimalP:"Sites_notanimalP__nktFf",labelSiteNum:"Sites_labelSiteNum__uafR4",divRes:"Sites_divRes__tzCvn",siteBtn:"Sites_siteBtn__kZVRp",divAnimal:"Sites_divAnimal__NYTnG",pickerDiv:"Sites_pickerDiv__eM0qZ"}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[544,774,888,179],function(){return e(e.s=3248)}),_N_E=e.O()}]);