(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{1180:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DynamicServices/DogSitter",function(){return n(8962)}])},8962:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(5893),i=n(7294),s=n(2562),c=n.n(s),r=n(1664),o=n.n(r),l=n(9198),d=n.n(l);function u(){var e=function(){if("default"!=E.current.value){H("animal");for(var e=0;e<A.length;e++)E.current.value===A[e].name&&U(A[e])}else H("default")},t=function(){j(h.current.value),y(!1),P(!1),H(""),"Site"==h.current.value&&fetch("http://site212242.tw.cs.unibo.it/apiSitesGet",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){v(e.data)})},n=function(){fetch("http://site212242.tw.cs.unibo.it/apiSitesGet",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){D(e.data)})},s=function(e,t){fetch("http://site212242.tw.cs.unibo.it/apiSitesPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:T,name:e,type:"dog",sitenumber:t})}),y(!1),P(!0)},r=(0,i.useState)({}),l=r[0],u=r[1],h=(0,i.useRef)(),m=(0,i.useState)(""),f=m[0],j=m[1],x=(0,i.useState)([]),p=x[0],v=x[1],_=(0,i.useState)([]),g=_[0],D=_[1],S=(0,i.useState)(!1),N=S[0],y=S[1],b=(0,i.useState)(),T=b[0],w=b[1],k=(0,i.useState)(!1),C=k[0],P=k[1],O=new Date,E=(0,i.useRef)(),G=(0,i.useState)([]),B=G[0],H=G[1],M=(0,i.useState)([]),A=M[0],V=M[1];(0,i.useEffect)(function(){fetch("../exist.json",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){u(e)}),l.key&&fetch("http://site212242.tw.cs.unibo.it/animalget",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){V(e.data)})},[l]);var F=(0,i.useState)([]),R=F[0],U=F[1],X=function(e){var t=new Date,n=new Date(e);return t.getTime()<n.getTime()},I=function(e){var t=e.getDay();return 0!==t&&6!==t};return(0,a.jsxs)("div",{className:"container-fluid",lang:"en",style:{marginBottom:"80px"},children:[(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("h1",{className:c().pageTitle,children:"Dog Sitter Service"})}),(0,a.jsxs)("div",{className:"row justify-content-center",children:[(0,a.jsx)("p",{className:c().introduction,children:"Hi, here you can take a reservation for this service. Please select the search filter you prefer!"}),(0,a.jsxs)("select",{className:"form-select ".concat(c().select),"aria-label":"select the search filter",ref:h,onChange:t,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select the search filter"}),(0,a.jsx)("option",{value:"Site",children:"Search for Site"}),(0,a.jsx)("option",{value:"Date",children:"Search for Date"})]})]}),(0,a.jsxs)("div",{className:"row justify-content-center",children:["Site"==f&&(0,a.jsx)("div",{className:"row justify-content-center",children:p.map(function(e,t){return(0,a.jsx)(a.Fragment,{children:e.services.includes("DogSitter")?(0,a.jsx)("div",{className:"col-lg-3 col-md-6 col-sm-12",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"card ".concat(c().card),children:(0,a.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,a.jsx)(o(),{href:"/Sites/".concat(e.name),children:(0,a.jsx)("button",{className:"stretched-link ".concat(c().cardBtn)})}),(0,a.jsx)("h5",{className:"card-title ".concat(c().cardTitle),children:e.name}),(0,a.jsx)("hr",{}),(0,a.jsx)("h6",{className:c().city,children:e.city}),(0,a.jsx)("p",{children:"Available Services:"}),e.services.map(function(e,t){return(0,a.jsx)("div",{children:(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:(0,a.jsx)("p",{className:"card-text",children:e})})})},t)}),(0,a.jsx)("p",{className:"card-footer mt-auto",children:"Click on the card to proceed!"})]})})},t)}):""})})}),"Date"==f&&(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(c().divDate),align:"center",children:[l.key&&A.length>0?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:c().pDate,children:"Please select the animal you want to take the reservation for!"}),(0,a.jsxs)("select",{className:"form-select ".concat(c().select),"aria-label":"Select the animal for the reservation",ref:E,onChange:e,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select your animal"}),A.map(function(e,t){return(0,a.jsx)("option",{value:e.name,children:e.name},t)})]})]}):"",l.key&&0==A.length?(0,a.jsx)("p",{children:"You must insert at least an animal in your profile before continue!"}):(0,a.jsx)("div",{children:"animal"==B&&R.breed&&R.breed.toUpperCase().includes("DOG")?(0,a.jsxs)("div",{children:[(0,a.jsx)("hr",{}),(0,a.jsx)("p",{className:c().pDate,id:"pdate",children:"Please select the date you prefer!"}),(0,a.jsx)(d(),{selected:T,onChange:function(e){P(!1),null!=e&&(8>e.getHours()||e.getHours()>19)&&e.setHours(O.getHours()+1),y(!0),w(e),n()},onSelect:function(e){e.setHours(O.getHours()+1)},dateFormat:"dd/MM/yyyy , h:mm a",showTimeSelect:!0,minDate:new Date,timeIntervals:60,isClearable:!0,placeholderText:"Choose a date",filterDate:I,filterTime:X,minTime:new Date(0,0,0,8,0),maxTime:new Date(0,0,0,19,0),"aria-label":"select a date for reservation"})]}):(0,a.jsx)("div",{children:"animal"==B&&R.breed&&!R.breed.toUpperCase().includes("DOG")&&(0,a.jsx)("p",{className:c().notDogP,children:"The animal must be a Dog!"})})})]})]}),(0,a.jsxs)("div",{className:"row justify-content-center",children:[!0==N&&null!=T&&"animal"==B&&R.breed&&R.breed.toUpperCase().includes("DOG")&&(0,a.jsx)("div",{children:g.map(function(e,t){return(0,a.jsx)("div",{children:e.services.includes("DogSitter")?(0,a.jsx)("div",{className:"justify-content-center ".concat(c().cardDiv),children:e.resDog.map(function(t,n){return(0,a.jsx)("div",{children:!t.some(function(e){return e.date==T.toISOString()})&&(0,a.jsxs)("div",{className:"card ".concat(c().card2),children:[(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title ".concat(c().cardTitle),children:e.name}),(0,a.jsx)("hr",{}),(0,a.jsx)("h6",{className:c().city,children:e.city}),(0,a.jsxs)("h6",{children:["Site number: ",e.resDog.indexOf(t)+1]}),(0,a.jsx)("p",{children:"Available Services:"}),e.services.map(function(e,t){return(0,a.jsx)("div",{children:(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:(0,a.jsx)("p",{className:"card-text",children:e})})})},t)})]}),(0,a.jsx)("button",{className:"card-footer ".concat(c().bookBtn),disabled:!l.key,onClick:function(){return s(e.name,e.resDog.indexOf(t))},children:"Book"})]})},n)})}):""},t)})}),!l.key&&(0,a.jsx)("p",{className:c().resP,children:"You are not logged , you can't take a reservation"}),!0==C&&(0,a.jsx)("p",{className:c().resP,children:"Reservation Made"})]}),(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-3 col-md-5 col-sm-8",children:(0,a.jsx)(o(),{href:"../Services",children:(0,a.jsx)("button",{className:c().btn,children:"Go Back to Services"})})})})]})}n(8698)},2562:function(e){e.exports={pageTitle:"DogSitter_pageTitle__Dy463",introduction:"DogSitter_introduction__w6MTr",select:"DogSitter_select__6UlFQ",btn:"DogSitter_btn__iVOud",card:"DogSitter_card__Tj9Om",card2:"DogSitter_card2__1NX14",cardDiv:"DogSitter_cardDiv__AVNAZ",cardTitle:"DogSitter_cardTitle__fmD6s",divDate:"DogSitter_divDate__24jDg",pDate:"DogSitter_pDate___rRFn",bookBtn:"DogSitter_bookBtn__od9_d",resP:"DogSitter_resP__2jV_A",city:"DogSitter_city__9hfQN",cardBtn:"DogSitter_cardBtn__0_PPM",notDogP:"DogSitter_notDogP__xkM8m"}}},function(e){e.O(0,[544,774,888,179],function(){return e(e.s=1180)}),_N_E=e.O()}]);