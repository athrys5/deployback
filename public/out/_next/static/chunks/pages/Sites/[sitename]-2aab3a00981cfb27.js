(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{3248:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Sites/[sitename]",function(){return n(1706)}])},1706:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(5893),s=n(7294),i=n(5936),l=n.n(i),r=n(9198),o=n.n(r);n(8698);var c=n(1163);function u(e){e.site;var t=function(e){R(!1),x(!1),D(!1),W(""),b(),T(!1),"DogSitter"==e?I("DogSitter"):"Veterinarian"==e&&I("Veterinarian"),p(!0)},n=function(){"DogSitter"==C?U.some(function(e){return e.getDate()==S.getDate()&&e.getMonth()==S.getMonth()&&e.getFullYear()==S.getFullYear()&&e.getHours()==S.getHours()})?x(!0):(fetch("http://site212242.tw.cs.unibo.it/apiSitesPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:S,name:el[0].name,type:"dog",sitenumber:ea})}).then().then(function(){window.location.reload()}),R(!0),D(!1)):"Veterinarian"==C&&(q.some(function(e){return e.getDate()==S.getDate()&&e.getMonth()==S.getMonth()&&e.getFullYear()==S.getFullYear()&&e.getHours()==S.getHours()})?x(!0):(fetch("http://site212242.tw.cs.unibo.it/apiSitesPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:S,name:el[0].name,type:"vet",sitenumber:ea})}).then().then(function(){window.location.reload()}),R(!0),D(!1)))},i=function(){if(D(!1),T(!1),"default"!=Z.current.value){W("animal");for(var e=0;e<ee.length;e++)Z.current.value===ee[e].name&&ef(ee[e])}else W("default")},r=function(e){if(T(!0),es(e),H([]),Y([]),z([]),J([]),b(),"DogSitter"==C){if(0!=el[0].resDog[e].length){for(var t in el[0].resDog[e])X.push(new Date(el[0].resDog[e][t].date));H(X)}}else if("Veterinarian"==C&&0!=el[0].resVet[e].length){for(var n in el[0].resVet[e])X.push(new Date(el[0].resVet[e][n].date));Y(X)}},u=(0,c.useRouter)(),d=(0,s.useState)({}),m=d[0],h=d[1],f=(0,s.useState)(!1),g=f[0],p=f[1],_=(0,s.useState)(!1),v=_[0],x=_[1],j=(0,s.useState)(),S=j[0],b=j[1],N=(0,s.useState)(!1),y=N[0],D=N[1],k=(0,s.useState)(!1),w=k[0],T=k[1],P=(0,s.useState)(""),C=P[0],I=P[1],V=(0,s.useState)([]),O=V[0],H=V[1],M=(0,s.useState)([]),B=M[0],Y=M[1],A=(0,s.useState)(!1),F=A[0],R=A[1],E=new Date,G=(0,s.useState)([]),U=G[0],z=G[1],L=(0,s.useState)([]),q=L[0],J=L[1],X=[],Z=(0,s.useRef)(),K=(0,s.useState)([]),Q=K[0],W=K[1],$=(0,s.useState)([]),ee=$[0],et=$[1],en=(0,s.useState)(""),ea=en[0],es=en[1],ei=(0,s.useState)([]),el=ei[0],er=ei[1],eo=function(e){var t=e.getDay();return 0!==t&&6!==t},ec=function(e){var t=new Date,n=new Date(e);return t.getTime()<n.getTime()},eu=function(e){return O.filter(function(t){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()})},ed=function(e){return B.filter(function(t){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()})};(0,s.useEffect)(function(){fetch("../exist.json",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){h(e)}),m.key&&fetch("http://site212242.tw.cs.unibo.it/animalget",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){et(e.data)}),fetch("http://site212242.tw.cs.unibo.it/apisiteName",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:u.query.sitename})}).then(function(e){return e.json()}).then(function(e){er(e.data)})},[m]);var em=(0,s.useState)([]),eh=em[0],ef=em[1];return(0,a.jsx)("div",{className:"container-fluid",style:{marginBottom:"80px"},children:el.map(function(e,s){return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().rowInfo),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().colInfo),children:[(0,a.jsx)("p",{className:l().name,children:e.name}),(0,a.jsxs)("p",{className:l().city,children:["City: ",e.city]}),(0,a.jsxs)("div",{className:l().servInfo,children:[(0,a.jsx)("p",{className:l().service,children:"Available services:"}),e.services.map(function(e,n){return(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:l().serBtn,onClick:function(){return t(e)},children:e})},n)})]})]})}),!0==g&&"DogSitter"==C&&m.key&&(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().divRes),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().divDate),children:[(0,a.jsx)("p",{className:l().labelPicker,children:C}),m.key&&ee.length>0?(0,a.jsxs)("div",{className:l().divAnimal,children:[(0,a.jsx)("p",{className:l().labelAnimal,children:"Please select an animal!"}),(0,a.jsxs)("select",{className:"form-select ".concat(l().select),"aria-label":"Select an animal",ref:Z,onChange:i,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select your animal"}),ee.map(function(e,t){return(0,a.jsx)("option",{value:e.name,children:e.name},t)})]})]}):"",m.key&&0==ee.length?(0,a.jsx)("p",{className:l().notanimalP,children:"You must insert at least an animal in your profile before continue!"}):(0,a.jsxs)("div",{className:"row justify-content-center",children:[(0,a.jsx)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:"animal"==Q&&eh.breed&&eh.breed.toUpperCase().includes("DOG")&&e.resDog.map(function(t,n){return(0,a.jsxs)("button",{className:l().siteBtn,onClick:function(){return r(e.resDog.indexOf(t))},children:["Site number: ",e.resDog.indexOf(t)+1]},n)})}),(0,a.jsx)("div",{children:!0==w&&eh.breed&&eh.breed.toUpperCase().includes("DOG")?(0,a.jsxs)("div",{className:l().pickerDiv,children:[(0,a.jsxs)("p",{className:l().labelSiteNum,children:["You have selected the Site number ",ea+1,", please choose a date!"]}),(0,a.jsx)(o(),{selected:S,onChange:function(e){R(!1),x(!1),null==e?D(!1):D(!0),null!=e&&(z(eu(e)),(8>e.getHours()||e.getHours()>19)&&e.setHours(E.getHours()+1)),b(e)},onSelect:function(e){z(eu(e)),e.setHours(E.getHours()+1)},dateFormat:"dd/MM/yyyy , h:mm a",showTimeSelect:!0,minDate:new Date,timeIntervals:60,isClearable:!0,excludeTimes:U,placeholderText:"Choose a date",filterDate:eo,filterTime:ec,minTime:new Date(0,0,0,8,0),maxTime:new Date(0,0,0,19,0),"aria-label":"select a date for the reservation"})]}):(0,a.jsx)("div",{children:"animal"==Q&&eh.breed&&!eh.breed.toUpperCase().includes("DOG")&&(0,a.jsx)("p",{className:l().notDogP,children:"The animal must be a Dog!"})})})]})]})}),!0==g&&"Veterinarian"==C&&m.key&&(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().divRes),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().divDate),children:[(0,a.jsx)("p",{className:l().labelPicker,children:C}),m.key&&ee.length>0?(0,a.jsxs)("div",{className:l().divAnimal,children:[(0,a.jsx)("p",{className:l().labelAnimal,children:"Please select an animal!"}),(0,a.jsxs)("select",{className:"form-select ".concat(l().select),"aria-label":"select an animal",ref:Z,onChange:i,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select your animal"}),ee.map(function(e,t){return(0,a.jsx)("option",{value:e.name,children:e.name},t)})]})]}):"",m.key&&0==ee.length?(0,a.jsx)("p",{className:l().notanimalP,children:"You must insert at least an animal in your profile before continue!"}):(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsxs)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:["animal"==Q&&parseInt(eh.height)<=parseInt(e.VetInfo.maxheight)&&parseInt(eh.length)<=parseInt(e.VetInfo.maxlength)&&e.resVet.map(function(t,n){return(0,a.jsxs)("button",{className:l().siteBtn,onClick:function(){return r(e.resVet.indexOf(t))},children:["Site number: ",e.resVet.indexOf(t)+1]},n)}),(0,a.jsxs)("div",{children:[!0==w&&(0,a.jsxs)("div",{className:l().pickerDiv,children:[(0,a.jsxs)("p",{className:l().labelSiteNum,children:["You have selected the Site number ",ea+1,", please choose a date!"]}),(0,a.jsx)(o(),{selected:S,onChange:function(e){R(!1),x(!1),null==e?D(!1):D(!0),null!=e&&(J(ed(e)),(8>e.getHours()||e.getHours()>19)&&e.setHours(E.getHours()+1)),b(e)},onSelect:function(e){J(ed(e)),e.setHours(E.getHours()+1)},dateFormat:"dd/MM/yyyy , h:mm a",showTimeSelect:!0,minDate:new Date,isClearable:!0,timeIntervals:60,excludeTimes:q,placeholderText:"Choose a date",filterDate:eo,filterTime:ec,minTime:new Date(0,0,0,8,0),maxTime:new Date(0,0,0,19,0),"aria-label":"select a date for the reservation"})]}),"animal"==Q&&(parseInt(eh.height)>parseInt(e.VetInfo.maxheight)||parseInt(eh.length)>parseInt(e.VetInfo.maxlength))?(0,a.jsx)("p",{className:l().cantbookP,children:"The size of the animal is not suitable"}):""]})]})})]})}),!0==y&&m.key&&(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-3 col-md-5 col-sm-8",children:(0,a.jsx)("button",{className:l().bookBtn,onClick:n,children:"Book!"})})}),!m.key&&(0,a.jsx)("p",{className:l().resP,children:"You are not logged , you can't take a reservation"}),!0==F&&(0,a.jsx)("p",{className:l().resP,children:"Reservation Made"}),!0==v&&(0,a.jsx)("p",{className:l().resP,children:"Sorry, the date selected is already reserved"}),(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-3 col-md-5 col-sm-8",children:(0,a.jsx)("button",{onClick:function(){return u.back()},className:l().backBtn,children:"Go back"})})})]},s)})})}},5936:function(e){e.exports={name:"Sites_name__YSUPx",city:"Sites_city__VDgr4",select:"Sites_select__pAlo5",service:"Sites_service__ALafS",servInfo:"Sites_servInfo__0mfbq",rowInfo:"Sites_rowInfo__zL__M",colInfo:"Sites_colInfo__jw2UL",serBtn:"Sites_serBtn__Q_m8h",labelPicker:"Sites_labelPicker__kdCn8",divDate:"Sites_divDate__93dKv",bookBtn:"Sites_bookBtn__0O_TO",resP:"Sites_resP__AdHzh",backBtn:"Sites_backBtn__I5vkI",notDogP:"Sites_notDogP__GUzAR",labelAnimal:"Sites_labelAnimal__V4LbO",cantbookP:"Sites_cantbookP__eML3A",notanimalP:"Sites_notanimalP__nktFf",labelSiteNum:"Sites_labelSiteNum__uafR4",divRes:"Sites_divRes__tzCvn",siteBtn:"Sites_siteBtn__kZVRp",divAnimal:"Sites_divAnimal__NYTnG",pickerDiv:"Sites_pickerDiv__eM0qZ"}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[544,774,888,179],function(){return e(e.s=3248)}),_N_E=e.O()}]);