(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{3248:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Sites/[sitename]",function(){return n(1706)}])},1706:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(5893),s=n(7294),i=n(5936),l=n.n(i),r=n(9198),o=n.n(r);n(8698);var c=n(1163);function u(){var e=function(e){F(!1),v(!1),y(!1),Q(""),S(),w(!1),"DogSitter"==e?C("DogSitter"):"Veterinarian"==e&&C("Veterinarian"),g(!0)},t=function(){"DogSitter"==P?G.some(function(e){return e.getDate()==j.getDate()&&e.getMonth()==j.getMonth()&&e.getFullYear()==j.getFullYear()&&e.getHours()==j.getHours()})?v(!0):(fetch("http://localhost:3000/apiSitesPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:j,name:ei[0].name,type:"dog",sitenumber:en})}).then().then(function(){window.location.reload()}),F(!0),y(!1)):"Veterinarian"==P&&(L.some(function(e){return e.getDate()==j.getDate()&&e.getMonth()==j.getMonth()&&e.getFullYear()==j.getFullYear()&&e.getHours()==j.getHours()})?v(!0):(fetch("http://localhost:3000/apiSitesPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:j,name:ei[0].name,type:"vet",sitenumber:en})}).then().then(function(){window.location.reload()}),F(!0),y(!1)))},n=function(){if(y(!1),w(!1),"default"!=X.current.value){Q("animal");for(var e=0;e<$.length;e++)X.current.value===$[e].name&&eh($[e])}else Q("default")},i=function(e){if(w(!0),ea(e),O([]),B([]),U([]),q([]),S(),"DogSitter"==P){if(0!=ei[0].resDog[e].length){for(var t in ei[0].resDog[e])J.push(new Date(ei[0].resDog[e][t].date));O(J)}}else if("Veterinarian"==P&&0!=ei[0].resVet[e].length){for(var n in ei[0].resVet[e])J.push(new Date(ei[0].resVet[e][n].date));B(J)}},r=(0,c.useRouter)(),u=(0,s.useState)({}),d=u[0],m=u[1],h=(0,s.useState)(!1),f=h[0],g=h[1],p=(0,s.useState)(!1),_=p[0],v=p[1],x=(0,s.useState)(),j=x[0],S=x[1],b=(0,s.useState)(!1),N=b[0],y=b[1],D=(0,s.useState)(!1),k=D[0],w=D[1],T=(0,s.useState)(""),P=T[0],C=T[1],I=(0,s.useState)([]),V=I[0],O=I[1],H=(0,s.useState)([]),M=H[0],B=H[1],Y=(0,s.useState)(!1),A=Y[0],F=Y[1],R=new Date,E=(0,s.useState)([]),G=E[0],U=E[1],z=(0,s.useState)([]),L=z[0],q=z[1],J=[],X=(0,s.useRef)(),Z=(0,s.useState)([]),K=Z[0],Q=Z[1],W=(0,s.useState)([]),$=W[0],ee=W[1],et=(0,s.useState)(""),en=et[0],ea=et[1],es=(0,s.useState)([]),ei=es[0],el=es[1],er=function(e){var t=e.getDay();return 0!==t&&6!==t},eo=function(e){var t=new Date,n=new Date(e);return t.getTime()<n.getTime()},ec=function(e){return V.filter(function(t){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()})},eu=function(e){return M.filter(function(t){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()})};(0,s.useEffect)(function(){fetch("../exist.json",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){m(e)}),fetch("http://localhost:3000/apisiteName",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:r.query.sitename})}).then(function(e){return e.json()}).then(function(e){el(e.data)}),d.key&&fetch("http://localhost:3000/animalget",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){ee(e.data)})},[d]);var ed=(0,s.useState)([]),em=ed[0],eh=ed[1];return(0,a.jsx)("div",{className:"container-fluid",style:{marginBottom:"80px"},children:ei.map(function(s,c){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().rowInfo),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().colInfo),children:[(0,a.jsx)("p",{className:l().name,children:s.name}),(0,a.jsxs)("p",{className:l().city,children:["City: ",s.city]}),(0,a.jsxs)("div",{className:l().servInfo,children:[(0,a.jsx)("p",{className:l().service,children:"Available services:"}),s.services.map(function(t,n){return(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:l().serBtn,onClick:function(){return e(t)},children:t})},n)})]})]})},c),!0==f&&"DogSitter"==P&&d.key&&(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().divRes),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().divDate),children:[(0,a.jsx)("p",{className:l().labelPicker,children:P}),d.key&&$.length>0?(0,a.jsxs)("div",{className:l().divAnimal,children:[(0,a.jsx)("p",{className:l().labelAnimal,children:"Please select an animal!"}),(0,a.jsxs)("select",{className:"form-select ".concat(l().select),"aria-label":"Select an animal",ref:X,onChange:n,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select your animal"}),$.map(function(e,t){return(0,a.jsx)("option",{value:e.name,children:e.name},t)})]})]}):"",d.key&&0==$.length?(0,a.jsx)("p",{className:l().notanimalP,children:"You must insert at least an animal in your profile before continue!"}):(0,a.jsxs)("div",{className:"row justify-content-center",children:[(0,a.jsx)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:"animal"==K&&em.breed&&em.breed.toUpperCase().includes("DOG")&&s.resDog.map(function(e,t){return(0,a.jsxs)("button",{className:l().siteBtn,onClick:function(){return i(s.resDog.indexOf(e))},children:["Site number: ",s.resDog.indexOf(e)+1]},t)})}),(0,a.jsx)("div",{children:!0==k&&em.breed&&em.breed.toUpperCase().includes("DOG")?(0,a.jsxs)("div",{className:l().pickerDiv,children:[(0,a.jsxs)("p",{className:l().labelSiteNum,children:["You have selected the Site number ",en+1,", please choose a date!"]}),(0,a.jsx)(o(),{selected:j,onChange:function(e){F(!1),v(!1),null==e?y(!1):y(!0),null!=e&&(U(ec(e)),(8>e.getHours()||e.getHours()>19)&&e.setHours(R.getHours()+1)),S(e)},onSelect:function(e){U(ec(e)),e.setHours(R.getHours()+1)},dateFormat:"dd/MM/yyyy , h:mm a",showTimeSelect:!0,minDate:new Date,timeIntervals:60,isClearable:!0,excludeTimes:G,placeholderText:"Choose a date",filterDate:er,filterTime:eo,minTime:new Date(0,0,0,8,0),maxTime:new Date(0,0,0,19,0),"aria-label":"select a date for the reservation"})]}):(0,a.jsx)("div",{children:"animal"==K&&em.breed&&!em.breed.toUpperCase().includes("DOG")&&(0,a.jsx)("p",{className:l().notDogP,children:"The animal must be a Dog!"})})})]})]})}),!0==f&&"Veterinarian"==P&&d.key&&(0,a.jsx)("div",{className:"row justify-content-center ".concat(l().divRes),children:(0,a.jsxs)("div",{className:"col-lg-5 col-md-6 col-xs-4 ".concat(l().divDate),children:[(0,a.jsx)("p",{className:l().labelPicker,children:P}),d.key&&$.length>0?(0,a.jsxs)("div",{className:l().divAnimal,children:[(0,a.jsx)("p",{className:l().labelAnimal,children:"Please select an animal!"}),(0,a.jsxs)("select",{className:"form-select ".concat(l().select),"aria-label":"select an animal",ref:X,onChange:n,children:[(0,a.jsx)("option",{value:"default",defaultValue:!0,children:"Select your animal"}),$.map(function(e,t){return(0,a.jsx)("option",{value:e.name,children:e.name},t)})]})]}):"",d.key&&0==$.length?(0,a.jsx)("p",{className:l().notanimalP,children:"You must insert at least an animal in your profile before continue!"}):(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsxs)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:["animal"==K&&parseInt(em.height)<=parseInt(s.VetInfo.maxheight)&&parseInt(em.length)<=parseInt(s.VetInfo.maxlength)&&s.resVet.map(function(e,t){return(0,a.jsxs)("button",{className:l().siteBtn,onClick:function(){return i(s.resVet.indexOf(e))},children:["Site number: ",s.resVet.indexOf(e)+1]},t)}),(0,a.jsxs)("div",{children:[!0==k&&(0,a.jsxs)("div",{className:l().pickerDiv,children:[(0,a.jsxs)("p",{className:l().labelSiteNum,children:["You have selected the Site number ",en+1,", please choose a date!"]}),(0,a.jsx)(o(),{selected:j,onChange:function(e){F(!1),v(!1),null==e?y(!1):y(!0),null!=e&&(q(eu(e)),(8>e.getHours()||e.getHours()>19)&&e.setHours(R.getHours()+1)),S(e)},onSelect:function(e){q(eu(e)),e.setHours(R.getHours()+1)},dateFormat:"dd/MM/yyyy , h:mm a",showTimeSelect:!0,minDate:new Date,isClearable:!0,timeIntervals:60,excludeTimes:L,placeholderText:"Choose a date",filterDate:er,filterTime:eo,minTime:new Date(0,0,0,8,0),maxTime:new Date(0,0,0,19,0),"aria-label":"select a date for the reservation"})]}),"animal"==K&&(parseInt(em.height)>parseInt(s.VetInfo.maxheight)||parseInt(em.length)>parseInt(s.VetInfo.maxlength))?(0,a.jsx)("p",{className:l().cantbookP,children:"The size of the animal is not suitable"}):""]})]})})]})}),!0==N&&d.key&&(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-3 col-md-5 col-sm-8",children:(0,a.jsx)("button",{className:l().bookBtn,onClick:t,children:"Book!"})})}),!d.key&&(0,a.jsx)("p",{className:l().resP,children:"You are not logged , you can't take a reservation"}),!0==A&&(0,a.jsx)("p",{className:l().resP,children:"Reservation Made"}),!0==_&&(0,a.jsx)("p",{className:l().resP,children:"Sorry, the date selected is already reserved"}),(0,a.jsx)("div",{className:"row justify-content-center",children:(0,a.jsx)("div",{className:"col-lg-3 col-md-5 col-sm-8",children:(0,a.jsx)("button",{onClick:function(){return r.back()},className:l().backBtn,children:"Go back"})})})]})})})}},5936:function(e){e.exports={name:"Sites_name__YSUPx",city:"Sites_city__VDgr4",select:"Sites_select__pAlo5",service:"Sites_service__ALafS",servInfo:"Sites_servInfo__0mfbq",rowInfo:"Sites_rowInfo__zL__M",colInfo:"Sites_colInfo__jw2UL",serBtn:"Sites_serBtn__Q_m8h",labelPicker:"Sites_labelPicker__kdCn8",divDate:"Sites_divDate__93dKv",bookBtn:"Sites_bookBtn__0O_TO",resP:"Sites_resP__AdHzh",backBtn:"Sites_backBtn__I5vkI",notDogP:"Sites_notDogP__GUzAR",labelAnimal:"Sites_labelAnimal__V4LbO",cantbookP:"Sites_cantbookP__eML3A",notanimalP:"Sites_notanimalP__nktFf",labelSiteNum:"Sites_labelSiteNum__uafR4",divRes:"Sites_divRes__tzCvn",siteBtn:"Sites_siteBtn__kZVRp",divAnimal:"Sites_divAnimal__NYTnG",pickerDiv:"Sites_pickerDiv__eM0qZ"}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[544,774,888,179],function(){return e(e.s=3248)}),_N_E=e.O()}]);